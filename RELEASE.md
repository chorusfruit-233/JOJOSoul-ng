# 发布指南

## 最新发布

### v2.2.0 - 技能系统增强版 (2025-12-21)

#### 🔥 技能系统重大改进
- 提高技能等级上限至10级
- 商店新增技能点出售（200金币/个）
- 新增批量升级功能（100000金币将所有技能升至10级）
- 技能每次升级都有冷却缩减（每级-0.15回合）
- 5级和10级有额外冷却奖励
- 为每个技能设计了1-10级成长曲线
- 技能在战斗中满足条件自动使用

#### 🛠️ Bug修复
- 修复成就提示和角色资料在GUI模式下仍显示终端输出的问题
- 修复技能点不足时崩溃的问题
- 修复时间减缓不生效且不会自动触发的问题
- 修复技能等级与效果简单相乘不合理的问题（如治疗术）
- 修复随机数生成异常（crit_min > crit_max时ValueError）
- 修复display.get_choice()的AttributeError（display为None）
- 修复Player.show_stats()中is_gui_enabled()方法不存在的问题

#### 🎮 游戏体验优化
- GUI模式下终端完全不输出任何内容，全部由GUI完成
- 商店界面显示当前金币数量
- 技能界面显示当前技能点
- 使治疗术回复的生命值可以突破上限
- 新增成就：技能专家、技能宗师、技能收藏家

#### 💻 技术改进
- 全面优化DisplayManager，优先使用GUI，成功则不输出终端
- 修复相关测试，临时设置显示模式为"terminal"以确保测试通过
- 更新版本号至2.2.0

---

### v2.1.0 - 显示模式修复版 (2025-12-15)

#### 🔧 修复问题
- 修复双击运行.py文件时无法选择显示模式的问题
- 优先尝试GUI模式进行显示模式选择
- GUI不可用时自动回退到终端选择界面
- 确保所有启动方式都能正常选择显示模式

#### 💻 用户体验改进
- 无论从终端启动还是双击运行，都能正常选择显示模式
- 优化显示模式选择界面，提供更直观的GUI选择
- 改进错误处理，确保程序在任何环境下都能正常启动

---

### v2.0.1 - 读取机制优化版 (2025-12-14)

#### 🔧 技术改进
- 实现RELEASE.md可靠文件读取机制
- 添加动态内容生成脚本
- 集成GitHub Actions自动发布
- 完整的错误处理和fallback机制
- 支持带后缀的版本号格式
- 优化版本匹配正则表达式

#### 🎉 新增功能

**🗺️ 新地图区域**
- 🏔️ **雪山**: 5级解锁，新增冰霜巨人敌人
- 🌑 **暗影遗迹**: 击败沼泽怪解锁，新增暗影刺客敌人
- ⛈️ **风暴高地**: 击败熔岩怪解锁，新增雷电元素敌人
- 🏛️ **古代神殿**: 8级解锁，3种高级敌人可选择挑战

**👥 新敌人类型**
- ❄️ **冰霜巨人**: HP:300, ATK:25, 火焰3.0倍伤害，水-1.5倍（回血）
- 🥷 **暗影刺客**: HP:180, ATK:30, 暗黑魔法-2.0倍（回血），闪光3.0倍伤害
- ⚡ **雷电元素**: HP:220, ATK:28, 水2.0倍伤害，闪光-1.8倍（回血）
- 🗿 **石像守卫**: HP:350, ATK:35, 土地-1.5倍（回血），闪光2.5倍伤害
- 🧙 **古代法师**: HP:280, ATK:40, 火2.0倍伤害，水-2.0倍（回血）
- ⚔️ **神殿骑士**: HP:400, ATK:30, 土地2.0倍伤害，暗黑魔法-1.0倍（回血）

**🛒 扩展商店系统**
- 🧙 **魔法袍** [200G]: +15% 元素伤害加成
- 💪 **力量护符** [150G]: +3 伤害下限倍率
- 🛡️ **守护盾** [180G]: +50 生命上限
- ⭐ **经验药水** [80G]: 直接获得100经验值
- 📜 **元素卷轴** [120G]: 选择元素，临时增强2倍伤害，持续3回合

**🎯 技能系统**
- 升级获得技能点，每次升级+1技能点
- 5个主动技能：
  - 🔥 **火球术**: 造成50点火焰伤害，无视元素倍率
  - 💚 **治疗术**: 恢复50%最大生命值
  - 🛡️ **护盾**: 下回合受到伤害减半
  - 💥 **元素爆发**: 所有元素伤害倍率x2，持续3回合
  - ⏰ **时间减缓**: 敌人下回合无法攻击
- 每个技能都有独立的冷却时间

**🏆 成就系统**
- 15个成就等你完成
- 战斗成就：初次胜利、小有成就、怪物猎人
- 收集成就：富有之人、大富翁
- 成长成就：等级大师、传奇勇者
- 特殊成就：元素大师、技能新手、技能大师
- 区域成就：雪山征服者、暗影克星、风暴掌控者、神殿英雄
- 终极成就：世界拯救者
- 完成成就获得金币奖励

#### 🔧 技术改进

**💾 存档系统**
- 完全兼容旧存档
- 支持所有新功能的存档和读档
- 技能等级、成就进度、新属性全部保存

**🧪 测试覆盖**
- 新增20+个测试用例
- 覆盖所有新功能
- 确保代码质量和稳定性

**⚡ 性能优化**
- 优化战斗计算逻辑
- 改进成就检查效率
- 提升游戏整体性能

#### 🎮 游戏平衡

- 新敌人难度经过精心调整
- 装备价格和效果平衡
- 技能冷却时间合理设置
- 成就奖励适度调整

#### 🐛 修复问题

- 修复原版中的各种小问题
- 改进用户界面体验
- 优化错误处理机制

---

## 版本管理

## 版本管理

项目使用语义化版本控制 (Semantic Versioning)：
- `MAJOR.MINOR.PATCH`
- 例如：`v1.0.0`, `v1.1.0`, `v1.0.1`

## 发布流程

### 1. 创建发布版本

```bash
# 创建并推送版本标签
git tag v1.0.0
git push origin v1.0.0
```

### 2. 自动发布

推送标签后会自动触发 GitHub Actions 执行以下操作：
1. 创建 GitHub Release
2. 构建多平台可执行文件
3. 上传构建产物到 Release
4. 更新最新发布状态

### 3. 支持的平台

- **Windows**: `.exe` 可执行文件 (ZIP 格式)
- **Linux**: 可执行文件 (tar.gz 格式)
- **macOS**: 可执行文件 (tar.gz 格式)

## 夜间构建

项目配置了夜间构建，每天北京时间 10:00 自动运行：
- 运行所有测试
- 检查代码质量
- 构建可执行文件
- 上传构建产物（保留 7 天）
- 更新构建状态

## 手动触发

可以在 GitHub Actions 页面手动触发以下工作流：
- **Release**: 推送标签时自动触发
- **Nightly Build**: 可手动触发测试构建
- **Build**: 推送到 master 分支时自动触发

## 发布检查清单

在发布新版本前，请确认：

- [ ] 所有测试通过
- [ ] 代码格式符合标准
- [ ] 更新了 CHANGELOG.md
- [ ] 更新了版本号（如需要）
- [ ] 测试了核心功能
- [ ] 检查了依赖安全性

## 版本号更新

如果需要在代码中更新版本号：

```python
# 在 JOJOSoul-ng.py 中更新
VERSION = "1.0.0"
```

## 回滚发布

如果发现问题需要回滚：

1. 删除有问题的 Release
2. 删除对应的标签
3. 创建新的修复版本
4. 重新发布

## 下载统计

可以在 GitHub Releases 页面查看各平台的下载统计，了解用户分布情况。